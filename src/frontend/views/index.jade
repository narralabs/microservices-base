extends layout

block content
  .w-full.min-h-screen.flex.items-center.justify-center.relative.bg-background
    // Cart Icon Button (Upper Right) - Hidden initially
    button.cart-icon-button.cart-icon-hidden#cartIconButton(type="button" aria-label="Toggle cart" style="display: none;")
      svg.cart-icon(width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg")
        path(d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 17.9 19 19 19C20.1 19 21 18.1 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21C10.5 21.8 9.8 22.5 9 22.5C8.2 22.5 7.5 21.8 7.5 21C7.5 20.2 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21C21.5 21.8 20.8 22.5 20 22.5C19.2 22.5 18.5 21.8 18.5 21C18.5 20.2 19.2 19.5 20 19.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round")
      span.cart-badge#cartBadge(style="display: none;") 0
    
    // Welcome Section (initially visible)
    .absolute.w-full.max-w-4xl.px-6.py-8.text-center#welcomeSection(class="sm:px-14 sm:py-14" style="top: 50%; left: 50%; transform: translate(-50%, -50%);")
      .w-full
        h1.font-medium.text-xl.leading-normal.mb-2.text-center(class="sm:text-2xl" style="letter-spacing: -0.48px; color: rgba(56, 34, 15, 0.8);")
          | welcome to hellocafe.ai
        p.text-base.mb-6(class="sm:text-xl sm:mb-10" style="line-height: 1.4; letter-spacing: -0.4px; color: rgba(56, 34, 15, 0.5); max-width: 900px;")
          | experience our AI-powered ordering system.
          br
          br
          | we've built a complete café ordering system using entirely self-hosted AI models.
          br
          br
          | this entire system runs on just 2 Hetzner servers (1 CPU + 1 CPU/GPU) for only $230/month, proving that powerful AI doesn't require massive infrastructure.
        .flex.gap-4.items-center.justify-center.w-full.mt-6(class="sm:mt-10")
          button.bg-primary.text-white.border-none.rounded-full.h-10.px-4.py-2.font-medium.text-sm.cursor-pointer.transition-all.whitespace-nowrap.shadow-lg#startExperience(class="sm:text-base" style="letter-spacing: -0.32px;" onmouseover="this.style.backgroundColor='rgba(56, 34, 15, 0.9)'; this.style.transform='translateY(-1px)';" onmouseout="this.style.backgroundColor='#38220f'; this.style.transform='translateY(0)';") start the experience

    // Chat Section (initially hidden)
    .absolute.w-full.max-w-xl.px-4.py-6#chatInterface(class="sm:p-8" style="display: none; top: 50%; left: 50%; transform: translate(-50%, -50%);")
      .flex.flex-col.min-h-80.max-h-80(class="sm:min-h-96 sm:max-h-96")
        .flex-grow.py-4.overflow-y-auto.flex.flex-col.gap-2.chat-messages
          // Messages will appear here
        .flex.gap-2.items-center.pt-4(class="sm:gap-4")
          input.flex-grow.bg-gray-200.border.rounded-full.h-10.px-3.py-2.text-sm.text-primary.outline-none.transition-all.message-input(class="sm:px-4 sm:text-base" style="background-color: #e9dcd3; border-color: rgba(233, 220, 211, 0.4); letter-spacing: -0.32px;" type="text" placeholder="Type your order here..." autofocus onfocus="this.style.borderColor='rgba(56, 34, 15, 0.3)';" onblur="this.style.borderColor='rgba(233, 220, 211, 0.4)';")
          button.bg-primary.text-white.border-none.rounded-full.h-10.w-10.min-w-10.p-0.text-base.cursor-pointer.transition-all.flex.items-center.justify-center.send-button ➤
      .mt-2.font-medium.text-sm.text-left.cart-status-message(class="sm:text-base" style="display: none; letter-spacing: -0.32px; color: rgba(56, 34, 15, 0.7);")
        // Cart status messages appear here
      
      // Voice UI Buttons
      .flex.flex-col.gap-2.items-center.justify-center.mt-4.voice-controls
        .flex.gap-2.items-center.justify-center.w-full
          button.voice-button.speak-to-agent-button#speakToAgentButton(type="button" style="display: flex;")
            span speak to agent
          button.voice-button.agent-listening-button#agentListeningButton(type="button" style="display: none;")
            span agent is listening
          button.voice-button.agent-speaking-button#agentSpeakingButton(type="button" style="display: none;")
            span agent is speaking
          button.voice-button.agent-processing-button#agentProcessingButton(type="button" style="display: none;")
            span processing...
          button.voice-button.stop-voice-button#stopVoiceButton(type="button" style="display: none;")
            span stop voice
        // Audio Visualizer (shown when listening)
        .audio-wave-visualizer#audioWaveVisualizer(style="display: none;")
          .wave-bar
          .wave-bar
          .wave-bar
          .wave-bar
          .wave-bar
          .wave-bar
          .wave-bar
          .wave-bar

    // Cart Panel (Figma Design)
    .cart-panel#cartPanel(style="display: none;")
      .cart-panel-header
        p.cart-panel-title your cart
        button.cart-panel-close#cartCloseButton(type="button" aria-label="Close cart")
          svg(width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg")
            path(d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round")
      .cart-panel-content
        .cart-items-list#cartItemsList
          // Cart items will be inserted here
        .cart-panel-summary
          .cart-subtotal
            p.cart-subtotal-label subtotal
            p.cart-subtotal-amount#cartSubtotal $0.00
          button.cart-checkout-button#cartCheckoutButton(type="button") checkout

    // Footer
    .absolute.bottom-4.w-full(class="sm:bottom-10" style="left: 50%; transform: translateX(-50%);")
      .flex.flex-col.items-center.justify-between.w-full.px-4.gap-2(class="sm:flex-row sm:px-10 sm:gap-0")
        .hidden.flex-1(class="sm:block")
        p.font-normal.text-xs.m-0.text-center.flex-1(class="sm:text-sm" style="line-height: 1.3; letter-spacing: -0.28px; color: rgba(56, 34, 15, 0.5);") an experiment by
          a(href="https://www.narralabs.com" target="_blank" rel="noopener" style="text-decoration: underline; color: inherit;") narra labs
          |  © 2025
        .flex.items-center.gap-2.flex-1.justify-center(class="sm:gap-3 sm:justify-end")
          a.w-7.h-7.flex.items-center.justify-center.transition-opacity(class="sm:w-8 sm:h-8" href="https://www.narralabs.com" target="_blank" rel="noopener" onmouseover="this.style.opacity='0.7';" onmouseout="this.style.opacity='1';")
            img.w-full.h-full(src="/images/narra-labs-logo.svg" alt="Narra Labs")
          a.w-7.h-7.flex.items-center.justify-center.transition-opacity(class="sm:w-8 sm:h-8" href="https://github.com/narralabs/microservices-base" target="_blank" rel="noopener" onmouseover="this.style.opacity='0.7';" onmouseout="this.style.opacity='1';")
            img.w-full.h-full(src="/images/github-logo.svg" alt="GitHub")